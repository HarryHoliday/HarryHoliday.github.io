---
sidebar_position: 2
---

# 1ì£¼

- ì„¸ë¯¸ë‚˜ ì†Œê°œ
- ë¼ìš°íŒ… ì„¤ì •
- useState, useEffectë¥¼ ì‚¬ìš©í•œ stateê´€ë¦¬ - 1

---

`ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ [application + http]` [ğŸ”— http spec](https://httpwg.org/specs/)

```txt
- í†µì‹ ì„ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ëª¨ë¸ì€ server - client ëª¨ë¸(tcp)ê³¼ peer to peer ëª¨ë¸(udp)
- ìš°ë¦¬ê°€ ë§Œë“œëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ì˜ í†µì‹ ì„ ìœ„í•´ tcpê¸°ë°˜ì˜ ì‘ìš©ê³„ì¸µì¸ http specì„ ë”°ë¥¸ë‹¤
- httpëŠ” í…ìŠ¤íŠ¸ ë² ì´ìŠ¤ í”„ë¡œí† ì½œë¡œ ë‚´ìš©ì„ ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆë‹¤ http/2ëŠ” ë°”ì´ë„ˆë¦¬ë¡œ ì‘ì„±ëœë‹¤
- ìš”ì²­ê³¼ ì‘ë‹µìœ¼ë¡œ êµ¬ë¶„, ìš”ì²­ì‹œ ì²«ë²ˆì§¸ ì¤„ì¸ request lineì„ ì´í•´í•˜ê³  ìˆëŠ”ê²Œ ì¢‹ë‹¤ê³  ìƒê°í•œë‹¤
- ë§¥ë¶ì˜ í„°ë¯¸ë„ì—ì„œëŠ” ncë¼ëŠ” cli ëª…ë ¹ì–´ë¥¼ ì‚¬ìš© http specì— ëª…ì‹œëœ ì‚¬í•­ì„ ë”°ë¼ request lineì„ ì‘ì„±í•˜ê³ 
  ì—”í„°ë¥¼ ë‘ë²ˆì¹˜ë©´ ì›í•˜ëŠ” ì„œë²„ì— ìš”ì²­ì„ ì „ì†¡í•  ìˆ˜ ìˆë‹¤
- ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì˜ ì²«ë²ˆì§¸ ì¤„ì€ status lineì´ë‹¤
- httpì˜ headerì¤‘ content-typeì˜ ê°’ì— ëŒ€í•´ ì´í•´í•˜ëŠ”ê²Œ ì¢‹ë‹¤ê³  ìƒê°í•œë‹¤ [ğŸ”— mime-type](https://developer.mozilla.org/ko/docs/Web/HTTP/Basics_of_HTTP/MIME_types)
```

---

`Browser` [ğŸ”— mdn](https://developer.mozilla.org/ko/docs/Glossary/Browser)

```txt
- ì›¹ ë¸Œë¼ìš°ì € ë˜ëŠ” ë¸Œë¼ìš°ì €ëŠ” ì›¹ì—ì„œ í˜ì´ì§€ë¥¼ ì°¾ì•„ì„œ ë³´ì—¬ì£¼ê³ , ì‚¬ìš©ìê°€ í•˜ì´í¼ë§í¬ë¥¼ í†µí•´ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ëŠ” ê°€ì¥ ìµìˆ™í•œ íƒ€ì…ì˜ ì‚¬ìš©ì ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.
```

---

`DOM` [ğŸ”— mdn](https://developer.mozilla.org/ko/docs/Web/API/Document_Object_Model/Introduction)

```txt
- ë¬¸ì„œ ê°ì²´ ëª¨ë¸(The Document Object Model, ì´í•˜ DOM) ì€ HTML, XML ë¬¸ì„œì˜ í”„ë¡œê·¸ë˜ë° interface ì´ë‹¤. DOMì€ ë¬¸ì„œì˜ êµ¬ì¡°í™”ëœ í‘œí˜„(structured representation)ì„ ì œê³µí•˜ë©° í”„ë¡œê·¸ë˜ë° ì–¸ì–´ê°€ DOM êµ¬ì¡°ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•˜ì—¬ ê·¸ë“¤ì´ ë¬¸ì„œ êµ¬ì¡°, ìŠ¤íƒ€ì¼, ë‚´ìš© ë“±ì„ ë³€ê²½í•  ìˆ˜ ìˆê²Œ ë•ëŠ”ë‹¤. DOM ì€ nodesì™€ objectsë¡œ ë¬¸ì„œë¥¼ í‘œí˜„í•œë‹¤. ì´ë“¤ì€ ì›¹ í˜ì´ì§€ë¥¼ ìŠ¤í¬ë¦½íŠ¸ ë˜ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë“¤ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆê²Œ ì—°ê²°ì‹œì¼œì£¼ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.
- ì›¹ í˜ì´ì§€ëŠ” ì¼ì¢…ì˜ ë¬¸ì„œ(document)ë‹¤. ì´ ë¬¸ì„œëŠ” ì›¹ ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ ê·¸ ë‚´ìš©ì´ í•´ì„ë˜ì–´ ì›¹ ë¸Œë¼ìš°ì € í™”ë©´ì— ë‚˜íƒ€ë‚˜ê±°ë‚˜ HTML ì†ŒìŠ¤ ìì²´ë¡œ ë‚˜íƒ€ë‚˜ê¸°ë„ í•œë‹¤. ë™ì¼í•œ ë¬¸ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ì²˜ëŸ¼ ë‹¤ë¥¸ í˜•íƒœë¡œ ë‚˜íƒ€ë‚  ìˆ˜ ìˆë‹¤ëŠ” ì ì— ì£¼ëª©í•  í•„ìš”ê°€ ìˆë‹¤. DOM ì€ ë™ì¼í•œ ë¬¸ì„œë¥¼ í‘œí˜„í•˜ê³ , ì €ì¥í•˜ê³ , ì¡°ì‘í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤. DOM ì€ ì›¹ í˜ì´ì§€ì˜ ê°ì²´ ì§€í–¥ í‘œí˜„ì´ë©°, ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ ê°™ì€ ìŠ¤í¬ë¦½íŒ… ì–¸ì–´ë¥¼ ì´ìš©í•´ DOM ì„ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
```

---

```txt
- ë¸Œë¼ìš°ì €ì˜ í™”ë©´ì— í‘œì‹œë˜ëŠ” í˜ì´ì§€ë¥¼ ì œê³µí•œë‹¤
- í˜ì´ì§€ëŠ” ì„ì˜ì˜ ë°ì´í„°ì™€ í•¨ê»˜ í‘œí˜„ëœë‹¤
- ì‚¬ìš©ìë¡œë¶€í„° ë°ì´í„°ë¥¼ ì…ë ¥ë°›ì•„ í˜ì´ì§€ëŠ” ë³€í•  ìˆ˜ ìˆë‹¤
```

`í”„ë¡œì íŠ¸ - data input / output, data flow`

_ë¸Œë¼ìš°ì €ê°€ ì •í™•í•œ í˜ì´ì§€ë¥¼ í‘œì‹œí•˜ë„ë¡ ë°ì´í„°ì˜ ì…ë ¥ê³¼ ì¶œë ¥ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì§€ì†í•  ìˆ˜ ìˆëŠ” íë¦„ì„ ìœ ì§€í•˜ë„ë¡ ì½”ë”©í•˜ì_

```txt
create-react-appì„ ì‚¬ìš©í•´ html, css, jsë“±ì„ ì½”ë”©í•˜ë©°,
html, css, js, ê¸°íƒ€íŒŒì¼ë“±ì„ ë¸Œë¼ìš°ì €ì— ì œê³µí•˜ëŠ” WASë¥¼ nodeë¡œ ì½”ë”©í•˜ë„ë¡ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í–ˆë‹¤

...
â”œâ”€â”€ .env          // í™˜ê²½ë³€ìˆ˜
â”œâ”€â”€ Dockerfile    // ë„ì»¤ ì´ë¯¸ì§€ ìƒì„±
â”œâ”€â”€ entrypoint.sh // ì‹¤í–‰ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ server
â”‚ â”œâ”€â”€ index.ts    // entrypoint
â”‚ â””â”€â”€ api         // ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ ë˜ëŠ” proxy
â”œâ”€â”€ src
â”‚ â”œâ”€â”€ index.tsx   // entrypoint
â”‚ â”œâ”€â”€ index.css   // style
â”‚ â”œâ”€â”€ App.tsx     // appì´ ì¤€ë¹„ëœ ì´í›„, Layoutì„ í‘œì‹œ
â”‚ â”œâ”€â”€ components  // í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” components
â”‚ â”œâ”€â”€ fetchers    // ì„œë²„ì™€ í†µì‹ 
â”‚ â”œâ”€â”€ hooks       // stateì™€ components ì—°ê²°
â”‚ â”œâ”€â”€ recoil      // state ì €ì¥ ë° ì¡°ì‘
â”‚ â”œâ”€â”€ routes      // urlì˜ pathnameê³¼ ë§¤ì¹­ë˜ëŠ” í˜ì´ì§€
â”‚ â”œâ”€â”€ helpers     // util, lib, etc...
â”‚ â””â”€â”€ stories     // storybook
â”œâ”€â”€ types
...
```

---

1. react router v6ì˜ ê°€ì´ë“œì— ë”°ë¼ ë‘ê°œì˜ í˜ì´ì§€ë¥¼ ë§Œë“ ë‹¤
2. home, about
3. í˜ì´ì§€ëŠ” ê³µí†µì˜ ì»´í¬ë„ŒíŠ¸ê°€ í‘œì‹œë˜ëŠ” ë¶€ë¶„ê³¼ ê° í˜ì´ì§€ì˜ ì»¨í…ì¸ ê°€ í‘œì‹œë˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆˆë‹¤

```txt

#############################################
# header                                    #
#############################################
# sidebar # main (home or about)
#         #
...
#         #
#############################################
# footer?                                   #
#############################################
```

---

`contextì— ëŒ€í•œ ì„¤ëª…`

`ğŸ’» coding - start`

[reactrouterv6 íŠœí† ë¦¬ì–¼ğŸ”—](https://reactrouter.com/en/main/start/tutorial)

- index.tsx ìˆ˜ì •

```tsx
...
import { createBrowserRouter, RouterProvider, Route } from 'react-router-dom';
...

const router = createBrowserRouter([
  {
    path: '/',
    element: <div>Hello world!</div>,
  },
]);

...

root.render(
  <React.StrictMode>
    <RouterProvider router={router} />
  </React.StrictMode>
);
```

- components í´ë” ìƒì„±, í´ë”ì•ˆì— Layout.tsx íŒŒì¼ì„ ë§Œë“ ë‹¤
- components/Layout.tsx

```tsx
// main tag ì‚¬ì´ì— ë¼ìš°íŒ…ì„ í†µí•œ contextë¥¼ í‘œì‹œí•˜ê¸°ìœ„í•´ react router v6ì˜ Outletì‚¬ìš©
import { Link, Outlet } from "react-router-dom";

const Layout = () => {
  return (
    <>
      <header>
        <Link to="/home">home</Link>
        <Link to="/about">about</Link>
      </header>
      <main>
        <Outlet />
      </main>
      <footer></footer>
    </>
  );
};

export default Layout;
```

- routes í´ë” ìƒì„±, í´ë”ì•ˆì— ì„¸ê°œì˜ íŒŒì¼ì„ ë§Œë“ ë‹¤
- index.tsx, about.tsx, home.tsx

- routes/index.tsx

```tsx
import About from "./about";
import Home from "./home";

type Menu = {
  path: string;
  title?: string;
  icon?: React.ReactNode;
  element: React.ReactNode;
};

export const menus: Menu[] = [
  { path: "about", title: "about", icon: null, element: <About /> },
  { path: "home", title: "home", icon: null, element: <Home /> },
];
```

- routes/home.tsx

```tsx
const Home = () => <div>home</div>;

export default Home;
```

- routes/about.tsx

```tsx
const About = () => <div>about</div>;

export default About;
```

- index.tsx ìˆ˜ì •

```tsx
...
import App from './App';
import { menus } from './routes';
import ErrorPage from './error-page';
...

const router = createBrowserRouter([
  {
    path: '/',
    element: <Layout />,
    children: menus,
    errorElement: <ErrorPage />,
  },
]);

const root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement);

root.render(
  <React.StrictMode>
    <App>
      <RouterProvider router={router} />
    </App>
  </React.StrictMode>
);
...
```

- App.tsx ì»¨í…ì¸ ì˜ ì œê³µì—¬ë¶€ë¥¼ íŒë‹¨í•œë‹¤ (ë©”íƒ€ë°ì´í„°ì„¤ì •, ì¸ì¦, ê¶Œí•œ, etc)

```tsx
import { FC, ReactNode, useEffect, useState } from "react";
import logo from "./logo.svg";

type Props = {
  children: React.ReactNode;
};

const App: FC<Props> = ({ children }) => {
  const [isReady, setIsReady] = useState(false);

  useEffect(() => {
    setTimeout(() => {
      setIsReady(true);
    }, 1000);
  }, []);

  if (!isReady)
    return (
      <div className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
      </div>
    );

  return <>{children}</>;
};

export default App;
```

- doc of useEffect at reactjs.org [ğŸ”—](https://ko.reactjs.org/docs/hooks-effect.html)

```txt
ë°ì´í„° ê°€ì ¸ì˜¤ê¸°, êµ¬ë…(subscription) ì„¤ì •í•˜ê¸°, ìˆ˜ë™ìœ¼ë¡œ React ì»´í¬ë„ŒíŠ¸ì˜ DOMì„ ìˆ˜ì •í•˜ëŠ” ê²ƒê¹Œì§€ ì´ ëª¨ë“  ê²ƒì´ side effectsì…ë‹ˆë‹¤.

Reactì˜ class ìƒëª…ì£¼ê¸° ë©”ì„œë“œì— ì¹œìˆ™í•˜ë‹¤ë©´,
useEffect Hookì„ componentDidMountì™€ componentDidUpdate, componentWillUnmountê°€ í•©ì³ì§„ ê²ƒìœ¼ë¡œ ìƒê°í•´ë„ ì¢‹ìŠµë‹ˆë‹¤.
```

- useEffect

```tsx
...
  const [isReady, setIsReady] = useState(false);
  // 1ì´ˆ ë’¤ì— ì•±ì„ ì¤€ë¹„ìƒíƒœë¡œ ë³€ê²½í•œë‹¤
  useEffect(() => {
    setTimeout(() => {
      setIsReady(true);
    }, 1000);
  }, []);
  // isReadyì˜ ë³€í™”ë¥¼ ê´€ì°°, ë³€í™”í•˜ë©´ 3ì´ˆë’¤ì— isReadyì˜ ë¶ˆë¦°ê°’ì„ ë°˜ëŒ€ë¡œ ë³€ê²½
  useEffect(() => {
    setTimeout(() => {
      setIsReady((old) => !old);
    }, 3000);
  }, [isReady]);
...
```

- ìœ„ ë‘ë²ˆì§¸ useEffectëŠ” ì§€ìš´ë‹¤

- Layoutì„ ìˆ˜ì •í•œë‹¤
- components/Layoutì„ ì§€ìš°ê³ 
- components/layout í´ë”ë¥¼ ìƒì„œ, index.ts, Layout.tsx, Header.tsx, Sidebar.tsxë¥¼ ë§Œë“ ë‹¤

- components/layout/Header.tsx

```tsx
const Header = () => {
  return (
    <header className="flex flex-row items-center justify-center min-w-full h-[48px]">
      <span className="text-xl normal-case">Yonex - v2</span>
    </header>
  );
};

export default Header;
```

- components/layout/Sidebar.tsx

```tsx
import { FC } from "react";
import { Link } from "react-router-dom";
import { menus } from "../../routes";
import Bar3Icon from "../icons/Bar3Icon";

const Sidebar: FC<{ height: string }> = ({ height }) => {
  return (
    <div className="z-10 flex flex-row" style={{ height }}>
      <div className="sidebar relative w-[68px]  bg-[#eaf1fb]">
        <button className="w-full btn btn-square btn-ghost">
          <Bar3Icon />
        </button>
        <ul className="menu">
          {menus.map(({ icon, path, title }, index) => (
            <li key={index}>
              <Link className="flex flex-col justify-center" to={path}>
                {icon}
                <span className="text-xs break-all">{title}</span>
              </Link>
            </li>
          ))}
        </ul>
      </div>
    </div>
  );
};

export default Sidebar;
```

- components/layout/Layout.tsx

```tsx
import { useEffect, useState } from "react";
import { Outlet } from "react-router-dom";
import Header from "./Header";
import Sidebar from "./Sidebar";

const Layout = () => {
  const [W_H, setW_H] = useState({ W: "100%", H: "100%" });

  const calcW_H = () => {
    setW_H({ W: `${window.innerWidth}px`, H: `${window.innerHeight}px` });
  };

  useEffect(() => {
    calcW_H();
    window.addEventListener("resize", calcW_H);
    return () => {
      window.removeEventListener("resize", calcW_H);
    };
  }, []);

  return (
    <div className="relative min-h-screen overflow-hidden">
      <div className="flex flex-row" style={{ width: W_H.W }}>
        {/* left */}
        <Sidebar height={W_H.H} />
        {/* right */}
        <div className="flex flex-col w-full">
          <Header />
          <div className="flex items-center justify-center w-full h-full">
            <Outlet />
          </div>
        </div>
      </div>
    </div>
  );
};

export default Layout;
```

- components/layout/index.ts

```ts
export { default as Layout } from "./Layout";
```

Heroiconsì—ì„œ svgë¥¼ ë³µì‚¬í•´ Icon componentë¥¼ ë§Œë“ ë‹¤

- components/icons í´ë”ë¥¼ ìƒì„±, HomeIcon.tsxì™€ InfoIcon.tsxë¥¼ ë§Œë“ ë‹¤

- components/icons/HomeIcon.tsx

```tsx
const HomeIcon = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    strokeWidth={1.5}
    stroke="currentColor"
    className="w-6 h-6"
  >
    <path
      strokeLinecap="round"
      strokeLinejoin="round"
      d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205l3 1m1.5.5l-1.5-.5M6.75 7.364V3h-3v18m3-13.636l10.5-3.819"
    />
  </svg>
);

export default HomeIcon;
```

- components/icons/InfoIcon.tsx

```tsx
const InfoIcon = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    strokeWidth={1.5}
    stroke="currentColor"
    className="w-6 h-6"
  >
    <path
      strokeLinecap="round"
      strokeLinejoin="round"
      d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"
    />
  </svg>
);

export default InfoIcon;
```

menus ì—ì„œ Iconì„ ì‚¬ìš©í•˜ë„ë¡ ë§µí•‘í•œë‹¤

- routes/index.tsx

```tsx
import HomeIcon from "../components/icons/HomeIcon";
import InfoIcon from "../components/icons/InfoIcon";
import About from "./about";
import Home from "./home";

type Menu = {
  path: string;
  title: string;
  icon?: React.ReactNode;
  element: React.ReactNode;
};

export const menus: Menu[] = [
  { path: "home", title: "home", icon: <HomeIcon />, element: <Home /> },
  { path: "about", title: "about", icon: <InfoIcon />, element: <About /> },
];
```

- yonex-v1ì˜ stopwatch code review

- routes/stopwatch.tsx

```tsx
import { useState } from "react";
import CommonButton from "../components/stop-watch/CommonButton";

const StopWatch = () => {
  const [stopWatch, setStopWatch] = useState({
    second: 0,
    isRunning: false,
    intervalId: null as unknown as NodeJS.Timer,
  });

  const stopWatchStartHandler = () => {
    if (stopWatch.isRunning) {
      return;
    }
    setStopWatch((cur) => ({ ...cur, second: 0 }));
    const intervalId = setInterval(() => {
      setStopWatch((cur) => ({ ...cur, second: cur.second + 1 }));
    }, 1000);
    setStopWatch((cur) => ({
      ...cur,
      isRunning: true,
      intervalId: intervalId,
    }));
  };

  const stopWatchStopHandler = () => {
    if (!stopWatch.isRunning) {
      return;
    }
    clearInterval(stopWatch.intervalId);
    setStopWatch((cur) => ({
      ...cur,
      isRunning: false,
      intervalId: null as unknown as NodeJS.Timer,
    }));
  };

  return (
    <div className="flex flex-col items-center justify-center">
      <div className="font-sans text-xl">{stopWatch.second}</div>
      <div className="my-5" />
      <CommonButton
        bgClassName="btn-primary"
        onClick={stopWatchStartHandler}
        text="START"
      />
      <div className="my-2" />
      <CommonButton
        bgClassName="btn-secondary"
        onClick={stopWatchStopHandler}
        text="STOP"
      />
    </div>
  );
};

export default StopWatch;
```

- components/stop-watch/CommonButton

```tsx
import type { FC, MouseEventHandler } from "react";

type Props = {
  text: string;
  bgClassName: string;
  onClick: MouseEventHandler<HTMLButtonElement>;
};

const CommonButton: FC<Props> = ({ text, bgClassName, onClick }) => {
  return (
    <button className={`btn btn-wide ${bgClassName}`} onClick={onClick}>
      {text}
    </button>
  );
};

export default CommonButton;
```

- ë©”ë‰´ì— ë“±ë¡
- routes/index.tsx

```tsx
...
export const menus: Menu[] = [
  { path: 'home', title: 'home', icon: <HomeIcon />, element: <Home /> },
  { path: 'about', title: 'about', icon: <InfoIcon />, element: <About /> },
  { path: 'stopwatch', title: 'stopwatch', icon: <ClockIcon />, element: <StopWatch /> },
];

```

`ì„¸ë¯¸ë‚˜ì‹œ ì½”ë“œ ì¬ì‘ì„±`
